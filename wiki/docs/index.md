### Определение 
**Микросервис-шаблонизатор для файлов *.docx (MS Office Word), высокопроизводительный, легкий и готовый к использованию**.  

[Шаблонизатор] позволяет заменять переменные шаблона переданным контентом, дополнять существующие параграфы и переопределять стили заменяемых фрагментов.

Юнит стандартизирован до спецификации [OpenAPI v3](https://spec.openapis.org/oas/v3.0.3) и представляет собой типичный [RESTfull API].<br>[Swagger UI] является неотъемлемой частью основного кода.


### Алгоритм работы

Готовим шаблон, места замены маркируем [Jinja2] синтаксисом. Загружаем, готовим контент. Отправляем запрос, получаем ссылку на готовый документ. 

Авторизация запросов основана на [JWT Standart], при этом используется аудиенция токена.  

Предлагается следующая схема: Администратор данного сервиса размещает публичный ключ сервиса клиента в папке `authorized_keys`. После этого сервис готов принимать запросы.

!!! attention "Поддерживается только [JWT] аутентификация по ассиметричным алгоритмам ("ES256", "ES512", "PS256", "PS512", "EdDSA")."
!!! attention "Каждый ключ должен находится в отдельном файле.<br> Имя ключа должно соотвествовать имени издателя определенном в поле токена `iss`.<br> Точки и тире нужно заменить на нижнее подчеркивание."

Клиент запрашивает авторизационный токен, в котором должны присутствовать нужные аудиенции. Получив его отправляет запросы к сервису, последний [верифицирует](structure/#верификация-токенов) полученный токен (в данном случае на публичном ключе сервиса выпустившего токен, не обращась к последнему).  

Таким образом сервису не требуется взаимодействовать с `auth` юнитом, не требуется и хранить реестр пользователей у себя.  

!!! info "Вообще ни auth, ни основной сервис не хранят состояние пользователя - реализуется основной принцип [RESTfull API].<br>Любой и каждый запрос самодостаточен."  

### Развертывание

```shell
# Клонируем репо
git clone 
cd docx
cp template.env .env
# Заполняем файл с переменными окружения
docker compose up
```

{% 
include 'links.md'
rewrite-relative-urls=false
%}
